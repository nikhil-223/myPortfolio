import React, { useEffect } from "react";
import "./Navbar.css";

const Navbar = (props) => {
	const { visible } = props;
	const colorset = (e) => {
		document
			.querySelector('[href="#about"]')
			.classList.remove("nav-item-active");
		document
			.querySelector('[href="#education"]')
			.classList.remove("nav-item-active");
		document
			.querySelector('[href="#projects"]')
			.classList.remove("nav-item-active");
		e.target.classList.add("nav-item-active");
	};
	// for svg animation

	useEffect(() => {
		let path = document.querySelectorAll("path")[1];
		let pathLength = path.getTotalLength();
		path.style.strokeDasharray = pathLength + " " + pathLength;
		path.style.strokeDashoffset = pathLength;

		window.addEventListener("scroll", () => {
			var scrollPercentage =
				(document.documentElement.scrollTop + document.body.scrollTop) /
				(document.documentElement.scrollHeight -
					document.documentElement.clientHeight);
			var drawLength = pathLength * scrollPercentage;
			path.style.strokeDashoffset = pathLength - drawLength;
		});
	}, []);

	return (
		<>
			<nav className={`navbar ${visible ? "bg-white" : "bg-normal"}`}>
				<div className="logo">
					<svg
						width="256"
						height="256"
						viewBox="0 0 256 256"
						fill="none"
						xmlns="http://www.w3.org/2000/svg">
						<g clip-path="url(#clip0_3_17)">
							<path
								d="M239.712 75.6055H238.677V77.6535L239.712 78.6775C240.459 89.0348 230.475 95.0722 230.475 95.0722C230.315 88.6402 225.355 87.9042 225.355 87.9042C213.28 84.8002 209.963 99.1788 209.963 99.1788C208.608 111.232 217.141 111.478 217.141 111.478C221.941 112.811 226.368 107.382 226.368 107.382V109.43L225.344 118.656C222.933 126.827 212.011 123.776 212.011 123.776C207.275 121.835 206.891 124.811 206.891 124.811C207.424 139.083 214.069 144.278 214.069 144.278C221.888 148.096 221.248 149.398 221.248 149.398C222.923 152.619 219.189 154.528 219.189 154.528C215.733 156.32 215.093 158.635 215.093 158.635C213.728 161.664 219.189 167.851 219.189 167.851C221.237 168.064 222.272 171.958 222.272 171.958C222.2 173.294 221.636 174.556 220.689 175.502C219.741 176.447 218.478 177.008 217.141 177.078C215.712 177.995 213.045 186.304 213.045 186.304C202.453 220.651 166.496 225.536 159.051 226.187C159.808 234.432 159.872 245.259 155.616 248.822C155.616 248.822 151.115 254.475 140.245 250.87C140.245 250.87 151.531 241.526 149.461 216.022C149.461 216.022 146.187 215.51 144.341 214.998C144.341 214.998 141.856 254.891 120.757 256C120.757 256 111.307 256.32 108.448 250.88C108.448 250.88 131.232 243.574 138.187 212.95L134.091 210.902C134.091 210.902 119.285 250.176 94.0907 250.87C94.0907 250.87 84.6293 252.214 78.7093 240.63C78.7093 240.63 108.256 238.443 128.949 206.795L124.853 203.723C124.853 203.723 94.2507 239.094 68.4587 233.44C68.4587 233.44 50.5707 229.536 51.0293 213.974C51.0293 213.974 86.1973 225.686 120.757 197.579L117.685 192.459C117.685 192.459 80.32 211.552 52.064 206.806C52.064 206.806 14.8693 199.691 26.4213 172.982C26.4213 172.982 64.5227 198.155 113.579 185.28V179.126C113.579 179.126 18.9333 187.19 16.1707 136.075C16.1707 136.075 17.376 122.432 23.3387 121.728C23.3387 121.728 48.3627 160.096 113.579 171.958V166.838C113.579 166.838 21.696 135.264 21.2907 78.6775C21.2907 78.6775 22.08 55.1042 40.7787 58.1762C40.7787 58.1762 42.5173 112.427 115.637 159.659L117.675 155.552C117.675 155.552 48.8747 112.182 50.0053 30.5068C50.0053 30.5068 54.016 -11.0292 84.864 2.82684C84.864 2.82684 64.6293 89.2588 122.805 147.36C122.805 147.36 131.243 131.414 155.627 131.979C155.627 131.979 193.387 130.432 197.653 171.958C197.653 171.958 200.939 212.032 157.664 216.032C157.664 216.032 158.059 218.048 158.475 221.088C195.424 218.454 201.76 182.208 201.76 182.208C207.264 142.422 171.008 129.931 171.008 129.931C142.475 119.094 121.781 140.171 121.781 140.171C94.0267 117.579 91.0293 72.5335 91.0293 72.5335L98.208 69.4615C89.184 63.5308 93.0773 51.0082 93.0773 51.0082C97.7707 54.9015 114.613 47.9468 114.613 47.9468C112.192 38.4002 117.685 36.6615 117.685 36.6615C122.592 35.9895 146.389 36.6615 146.389 36.6615C146.389 26.7522 153.568 27.4455 153.568 27.4455C155.947 30.1015 164.853 31.5415 164.853 31.5415C179.424 37.7388 178.187 38.7095 178.187 38.7095C178.933 40.4588 180.235 39.7442 180.235 39.7442C180.075 31.0508 189.461 34.6242 189.461 34.6242C190.4 43.8935 216.117 56.1388 216.117 56.1388C219.883 58.6775 216.117 63.3175 216.117 63.3175L220.213 66.3895H224.32L226.368 67.4135L236.619 68.4375C240.768 69.4295 239.712 75.6162 239.712 75.6162V75.6055ZM163.829 53.0562C163.829 53.0562 158.133 55.7868 161.771 62.2828C161.771 62.2828 163.371 64.5655 166.901 66.3788C166.901 66.3788 159.648 53.6002 176.128 57.1522C176.128 57.1522 172.48 50.1122 163.829 53.0562ZM212.021 67.4028H204.843V69.4508L209.963 74.5708L214.069 66.3788L212.021 67.4028Z"
								fill="#D27C2C"
							/>
						</g>
						<defs>
							<clipPath id="clip0_3_17">
								<rect width="256" height="256" fill="white" />
							</clipPath>
						</defs>
					</svg>
				</div>
				<ul className="menu">
					<li className="menu_item">
						<a href="#about" className="nav-item-active" onClick={colorset}>
							About
						</a>
					</li>
					<li className="menu_item">
						<a href="#education" onClick={colorset}>
							Education
						</a>
					</li>
					<li className="menu_item">
						<a href="#projects" onClick={colorset}>
							Projects
						</a>
					</li>
				</ul>
			</nav>
			<div className="linecontainer">
				<svg
					width="184"
					height="1562"
					viewBox="0 0 184 1562"
					fill="none"
					xmlns="http://www.w3.org/2000/svg">
					<path
						d="M84 0V681.5H138.5C150.667 690.833 167.7 714.6 138.5 735H12C23.5 726.333 39.6 703.5 12 681.5C36 679.667 84 683.1 84 711.5C84 739.9 84 758.333 84 764H154C142.833 772.667 127.2 795.5 154 817.5H27.5C15.8333 809.333 -0.500023 787.2 27.5 764C46.3333 763 84 764.1 84 776.5C84 788.9 84 1224.33 84 1440.5H62.5C64.3333 1433.67 63 1420 43 1420C23 1420 15 1420 13.5 1420C9.16664 1421 0.799978 1426.5 1.99998 1440.5C3.49998 1458 1.99998 1460.5 1.99998 1465C1.99998 1469.5 8 1481 22.5 1479.5C34.1 1478.3 43.3333 1479 46.5 1479.5L73 1512.5V1540C71.6667 1546.5 72.9 1559.6 88.5 1560C104.1 1560.4 116.667 1560.17 121 1560C124.833 1558.83 132.4 1553.8 132 1543C131.6 1532.2 131.833 1518.17 132 1512.5C131.5 1508.17 127.5 1499.5 115.5 1499.5C103.5 1499.5 92.5 1499.5 88.5 1499.5L62.5 1465V1461H123.5C123 1467.17 124.7 1479.5 135.5 1479.5C146.3 1479.5 163 1479.5 170 1479.5C174.167 1477.83 182.5 1472.6 182.5 1465C182.5 1457.4 182.5 1441.83 182.5 1435C182.667 1430 180.4 1420 170 1420C157 1420 139.5 1421 137.5 1420.5C135.5 1420 120.5 1424 123.5 1440.5H99.5"
						stroke="black"
						stroke-width="2"
					/>
				</svg>
			</div>
		</>
	);
};

export default Navbar;
